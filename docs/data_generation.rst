.. Copyright 2020 University of Maryland and other Hatchet Project Developers.
See the top-level LICENSE file for details.

   SPDX-License-Identifier: MIT

*****************************
Generating Profiling Datasets
*****************************

HPCToolkit
==========
Hatchet can read HPCToolkit database generated by using ``hpcprof-mpi`` command.

.. code-block:: console

   >>> hpcstruct ./<program>
   >>> mpirun -np <num_ranks> hpcrun <hpcrun_args> ./<program> <program_args>
   >>> mpirun -np <num_ranks> hpcprof-mpi --metric-db=yes -S <hpcstruct_file> -I <path_to_src> <measurements-directory>

Please note that you should use ``--metric-db`` option.

Caliper
=======


Callgrind
=========


cProfile
========


Pyinstrument
============
Hatchet can read Pyinstrument JSON files which can be generated 
by using its Python API or using the command line.

**Command line**

.. code-block:: python

   pyinstrument -r json -o <outputfile>.json ./<program>


**Python API**

.. code-block:: python

   from pyinstrument import Profiler
   from pyinstrument.renderers import JSONRenderer
   profiler = Profiler()

   profiler.start()
   # do some work
   profiler.stop()

   print(JSONRenderer().render(profiler.last_session))